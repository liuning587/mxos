/**
 ******************************************************************************
 * @file      debug.c
 * @brief     调试模块的实现.
 * @details   This file including all API functions's implement of debug.c.
 * @copyright
 *
 ******************************************************************************
 */
 
/*-----------------------------------------------------------------------------
Section: Includes
-----------------------------------------------------------------------------*/
#include <stdio.h>
#include <types.h>
#include <taskLib.h>
#include <intLib.h>
#include <debug.h>

/*-----------------------------------------------------------------------------
Section: Type Definitions
-----------------------------------------------------------------------------*/
/* NONE */

/*-----------------------------------------------------------------------------
Section: Constant Definitions
-----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
Section: Global Variables
-----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
Section: Local Variables
-----------------------------------------------------------------------------*/
/* NONE */

/*-----------------------------------------------------------------------------
Section: Local Function Prototypes
-----------------------------------------------------------------------------*/
/* NONE */

/*-----------------------------------------------------------------------------
Section: Function Definitions
-----------------------------------------------------------------------------*/

#ifdef ASSERT_DEBUG
/**
 ******************************************************************************
 * @brief      断言信息输出
 * @param[in]  None
 * @param[out] None
 * @retval     None
 *
 ******************************************************************************
 */
void
__assert_func(const char *pfile, int line, const char *pfun, const char *pex)
{

    printf("(%s) assert failed at %s:%d file:%s\n", pex, pfun, line, pfile);
    intLock();
    while(1);
}
#endif

/**
 ******************************************************************************
 * @brief
 * @param[in]  None
 * @param[out] None
 *
 * @retval     None
 ******************************************************************************
 */
extern void
printbuffer(const char_t* format,
            const uint8_t* buffer,
            int32_t len)
{
    (void)printf(format);
    for (int32_t i = 0; i < len; i++)
    {
        (void)printf("%02X ", *(buffer + i));
    }
    (void)printf("\r\n");
}

/*--------------------------------debug.c------------------------------------*/
